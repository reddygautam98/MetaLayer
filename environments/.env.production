# Environment Configuration Template
# This file should be copied and customized for each environment

# =============================================================================
# ENVIRONMENT SETTINGS
# =============================================================================
ENVIRONMENT=production
DEPLOYMENT_MODE=production

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_DB=airflow
POSTGRES_USER=postgres
# POSTGRES_PASSWORD should be set via GitHub Secrets

# =============================================================================
# AIRFLOW CONFIGURATION
# =============================================================================
AIRFLOW_UID=50000
AIRFLOW_GID=0
_AIRFLOW_WWW_USER_USERNAME=admin
# _AIRFLOW_WWW_USER_PASSWORD should be set via GitHub Secrets

# Airflow Performance Settings
AIRFLOW__CORE__PARALLELISM=64
AIRFLOW__CORE__DAG_CONCURRENCY=32  
AIRFLOW__CORE__MAX_ACTIVE_RUNS_PER_DAG=8
AIRFLOW__CORE__MAX_ACTIVE_TASKS_PER_DAG=32

# Airflow Security Settings
AIRFLOW__WEBSERVER__EXPOSE_CONFIG=false
AIRFLOW__WEBSERVER__ENABLE_PROXY_FIX=true
AIRFLOW__CORE__SECURITY=true
AIRFLOW__API__AUTH_BACKENDS=airflow.api.auth.backend.basic_auth

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Grafana Admin Credentials
GF_SECURITY_ADMIN_USER=admin
# GF_SECURITY_ADMIN_PASSWORD should be set via GitHub Secrets

# Prometheus Settings
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_STORAGE_RETENTION_SIZE=10GB

# =============================================================================
# RESOURCE LIMITS
# =============================================================================
# PostgreSQL
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB

# Docker Resource Limits
WEBSERVER_CPU_LIMIT=2.0
WEBSERVER_MEMORY_LIMIT=4G
SCHEDULER_CPU_LIMIT=1.0
SCHEDULER_MEMORY_LIMIT=2G

# =============================================================================
# NETWORK CONFIGURATION
# =============================================================================
# External Port Mappings (Production should use reverse proxy)
AIRFLOW_WEBSERVER_PORT=8080
GRAFANA_PORT=3000
PROMETHEUS_PORT=9090
POSTGRES_EXTERNAL_PORT=5433

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_S3_BUCKET=""  # Optional: S3 bucket for backups

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
AIRFLOW__LOGGING__LOGGING_LEVEL=INFO
AIRFLOW__LOGGING__REMOTE_LOGGING=false
LOG_RETENTION_DAYS=14

# =============================================================================
# DATA PIPELINE SETTINGS
# =============================================================================
# Processing Batch Sizes
BRONZE_BATCH_SIZE=10000
SILVER_BATCH_SIZE=5000
GOLD_BATCH_SIZE=1000

# Data Quality Thresholds
DATA_QUALITY_THRESHOLD=0.95
FRESHNESS_THRESHOLD_HOURS=24

# =============================================================================
# ALERTING CONFIGURATION
# =============================================================================
ALERT_EMAIL_ENABLED=true
SLACK_WEBHOOK_ENABLED=false
ALERT_EMAIL_RECIPIENTS=""  # Comma-separated email addresses
SLACK_WEBHOOK_URL=""

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_DATA_LINEAGE=true
ENABLE_COST_MONITORING=true  
ENABLE_PERFORMANCE_PROFILING=false
ENABLE_DEBUG_LOGGING=false